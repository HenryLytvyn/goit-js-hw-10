{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst inputCalendar = document.querySelector('#datetime-picker');\nconst timerContainer = document.querySelector('.timer');\n\nstartBtn.disabled = true;\n\nlet date;\nlet deltaTime;\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] > Date.now()) {\n      date = selectedDates[0];\n      startBtn.disabled = false;\n      startBtn.classList.add('start-active');\n    } else {\n      iziToast.show({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        backgroundColor: '#B51B1B',\n        image: '../img/error.svg',\n        timeout: '3000',\n      });\n      startBtn.disabled = true;\n      startBtn.classList.remove('start-active');\n    }\n\n    if (date) {\n      deltaTime = date.getTime() - Date.now();\n    }\n  },\n});\n\nstartBtn.addEventListener('click', handleCountdown);\n\nfunction handleCountdown() {\n  inputCalendar.style.cursor = 'default';\n  startBtn.classList.remove('start-active');\n\n  const countdownInterval = setInterval(() => {\n    if (deltaTime > 999) {\n      startBtn.disabled = true;\n      inputCalendar.disabled = true;\n\n      deltaTime -= 1000;\n      const currentValue = convertMs(deltaTime);\n      // console.log(currentValue);\n\n      timerContainer.innerHTML = `<div class=\"field\">\n  <span class=\"value\" data-days>${String(currentValue.days).padStart(\n    2,\n    '0'\n  )}</span>\n  <span class=\"label\">Days</span>\n</div>\n<div class=\"field\">\n  <span class=\"value\" data-hours>${String(currentValue.hours).padStart(\n    2,\n    '0'\n  )}</span>\n  <span class=\"label\">Hours</span>\n</div>\n<div class=\"field\">\n  <span class=\"value\" data-minutes>${String(currentValue.minutes).padStart(\n    2,\n    '0'\n  )}</span>\n  <span class=\"label\">Minutes</span>\n</div>\n<div class=\"field\">\n  <span class=\"value\" data-seconds>${String(currentValue.seconds).padStart(\n    2,\n    '0'\n  )}</span>\n  <span class=\"label\">Seconds</span>\n</div>`;\n    } else {\n      inputCalendar.disabled = false;\n\n      inputCalendar.style.cursor = 'pointer';\n\n      clearInterval(countdownInterval);\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["startBtn","inputCalendar","timerContainer","date","deltaTime","flatpickr","selectedDates","iziToast","handleCountdown","countdownInterval","currentValue","convertMs","ms","days","hours","minutes","seconds"],"mappings":"2GAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAgB,SAAS,cAAc,kBAAkB,EACzDC,EAAiB,SAAS,cAAc,QAAQ,EAEtDF,EAAS,SAAW,GAEpB,IAAIG,EACAC,EAEJC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,KAAK,IAAG,GAC7BH,EAAOG,EAAc,CAAC,EACtBN,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,cAAc,IAErCO,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,gBAAiB,UACjB,MAAO,mBACP,QAAS,MACjB,CAAO,EACDP,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,cAAc,GAGtCG,IACFC,EAAYD,EAAK,QAAS,EAAG,KAAK,IAAG,EAExC,CACH,CAAC,EAEDH,EAAS,iBAAiB,QAASQ,CAAe,EAElD,SAASA,GAAkB,CACzBP,EAAc,MAAM,OAAS,UAC7BD,EAAS,UAAU,OAAO,cAAc,EAExC,MAAMS,EAAoB,YAAY,IAAM,CAC1C,GAAIL,EAAY,IAAK,CACnBJ,EAAS,SAAW,GACpBC,EAAc,SAAW,GAEzBG,GAAa,IACb,MAAMM,EAAeC,EAAUP,CAAS,EAGxCF,EAAe,UAAY;AAAA,kCACC,OAAOQ,EAAa,IAAI,EAAE,SACxD,EACA,GACJ,CAAG;AAAA;AAAA;AAAA;AAAA,mCAIgC,OAAOA,EAAa,KAAK,EAAE,SAC1D,EACA,GACJ,CAAG;AAAA;AAAA;AAAA;AAAA,qCAIkC,OAAOA,EAAa,OAAO,EAAE,SAC9D,EACA,GACJ,CAAG;AAAA;AAAA;AAAA;AAAA,qCAIkC,OAAOA,EAAa,OAAO,EAAE,SAC9D,EACA,GACJ,CAAG;AAAA;AAAA,OAGH,MACMT,EAAc,SAAW,GAEzBA,EAAc,MAAM,OAAS,UAE7B,cAAcQ,CAAiB,CAElC,EAAE,GAAI,CACT,CAEA,SAASE,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}